# Obsidian プラグイン 要件定義：「カード形式ノートビュー」

## 🎯 目的・ゴール

- 最近編集したノートをカード形式（タイル＋プレビュー）で一覧表示する
- ノートをすぐに開けるようにし、タイトルや本文冒頭を見て目的のノートを探しやすくする
- タグ・ファイル名・フロントマターなどによるフィルター／検索を可能にする
- ノートの関連性（リンクやGraph）は扱わない

---

## 📄 表示仕様

- **表示形式**: タイルビュー（カード形式）
- **表示項目**:
  - タイトル
  - 本文冒頭（最大3行）
  - 最終更新日
- **抜粋方法**: 本文の先頭から3行分のテキストを抽出（マークダウン解釈なし）
- **ソート条件**:
  - フロントマターの `updated`（デフォルト）
  - 任意のフロントマターキー（ユーザー設定可能）
  - 実ファイルの更新日時（file.mtime）
- **並び順**: 昇順／降順（デフォルトは降順）
- **ピン留め**: ピン留めされたノートは常に上部に表示
- **仮想スクロール**: 使用する（例: `react-virtuoso`）

---

## 🔍 検索・フィルター

- **フィルター項目**:
  - フォルダ指定（複数可）
  - タグ指定
  - ファイル名検索（部分一致）
  - 更新日条件（○日以内、○日以降）
  - 除外設定（フォルダ、タグ、ファイル名単位）

---

## ⚙️ 動作・起動

- **表示方法**:
  - コマンドパレットから起動
  - 新しいタブとして開く（専用ビュー）
  - サイドペイン表示（任意）
  - Obsidian 起動時に自動表示（設定可能）
- **ノートクリック時の挙動**:
  - アクティブペインでノートを開く
- **ピン留め**:
  - カード上のピンアイコンで切り替え
  - 状態は `data.json` に保存

---

## ⚙️ カスタマイズ性

- **表示の見た目**: 固定デザイン（CSSカスタマイズなし）
- **更新日キーの指定**: フロントマターから任意のキーを設定可能（デフォルト: `updated`）

---

## 🧱 技術方針・依存ライブラリ

- **UIライブラリ**: React + react-virtuoso（仮想スクロール）
- **ストレージ**: `data.json`（ピン留めなどの状態管理）
- **ノート情報取得**: metadataCache 経由

---